using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Cryptography;
using System.Text;
using System.Threading.Tasks;
using System.Xml.Linq;

namespace ConsoleApp15

{
    internal class Program
    {
        static void Main(string[] args)
        {
            Database database = new Database(new List<Player>());

            const string AddPlayer = "1";
            const string RemovePlayer = "2";
            const string BanPlayer = "3";
            const string UnBanPlayer = "4";
            const string ShowInfo = "5";
            const string CommandExit = "6";
            bool isActive = true;

            while (isActive == true)
            {
                Console.WriteLine(AddPlayer + " - Добавить игрока\n" +
                    RemovePlayer + " - Удалить игрока\n" +
                    BanPlayer + " - Забанить игрока\n" +
                    UnBanPlayer + " - Разбанить игрока\n" +
                    ShowInfo + " - Вывод списка игроков\n" +
                    CommandExit + " - Выход из программы\n");
                string userInput = Console.ReadLine();

                switch (userInput)
                {
                    case AddPlayer:
                        database.AddPlayer();
                        break;
                    case RemovePlayer:
                        database.RemovePlayer();
                        break;
                    case BanPlayer:
                        database.BanPlayerByID();
                        break;
                    case UnBanPlayer:
                        database.UnBanPlayerByID();
                        break;
                    case ShowInfo:
                        database.ShowAllPlayers();
                        break;
                    case CommandExit:
                        isActive = false;
                        break;
                    default:
                        Console.Clear();
                        break;
                }
            }
        }
    }

    class Database
    {
        private List<Player> _players = new List<Player>();

        public Database(List<Player> players)
        {
            _players = players;
        }

        public void AddPlayer()
        {
            Console.Clear();
            Console.WriteLine("Введите имя нового игрока: ");
            string userInputName = Console.ReadLine();
            Console.WriteLine("Введите начальный уровень игрока");
            int userInputLevel = 0;
            userInputLevel = CheckNumber(userInputLevel);
            _players.Add(new Player(userInputName, userInputLevel, false));
            Console.WriteLine("Игрок с ником - " + userInputName + " добавлен.");
            Console.ReadKey();
            Console.Clear();
        }

        public void RemovePlayer()
        {
            Console.Clear();
            Console.WriteLine("Введите ID игрока: ");
            int userInputID = 0;
            userInputID = CheckNumber(userInputID);

            for (int i = 0; i < _players.Count; i++)
            {
                if (_players[i].GetID() == userInputID)
                {
                    _players.Remove(_players[i]);
                    Console.WriteLine("Игрок удален.");
                    Console.ReadKey();
                    Console.Clear();
                }
            }
            Console.Clear();
        }

        public void ShowAllPlayers()
        {
            Console.Clear();

            foreach (var player in _players)
            {
                player.ShowPlayerInfo();
            }
            Console.ReadKey();
            Console.Clear();
        }

        public void BanPlayerByID()
        {
            Console.Clear();
            Console.WriteLine("Введите ID игрока: ");
            int userInputID = 0;
            userInputID = CheckNumber(userInputID);

            foreach (var player in _players)
            {
                if (player.GetID() == userInputID)
                {
                    player.BanPlayer();
                }
            }
            Console.Clear();
        }

        public void UnBanPlayerByID()
        {
            Console.Clear();
            Console.WriteLine("Введите ID игрока: ");
            int userInputID = 0;
            userInputID = CheckNumber(userInputID);

            foreach (var player in _players)
            {
                if (player.GetID() == userInputID)
                {
                    player.UnBanPlayer();
                }
            }
            Console.Clear();
        }

        public int CheckNumber(int number)
        {
            bool isSuccesfully = false;

            while (isSuccesfully == false)
            {
                string userInput = Console.ReadLine();
                isSuccesfully = int.TryParse(userInput, out int tempNumber);

                if (isSuccesfully == true)
                {
                    number = tempNumber;
                }
                else
                {
                    Console.WriteLine("Укажите число");
                }
            }

            return number;
        }
    }

    class Player
    {
        private static int _ids;
        private int _id;
        private string _name;
        private int _level;
        private bool _isbanned;

        public Player(string name, int level, bool isBanned)
        {
            _id = ++_ids;
            _name = name;
            _level = level;
            _isbanned = isBanned;
        }

        public void ShowPlayerInfo()
        {
            if (_isbanned == true)
            {
                Console.WriteLine(_id + " " + _name + " " + _level + " " + "Забанен");
            }
            else
            {
                Console.WriteLine(_id + " " + _name + " " + _level + " " + "Не забанен");
            }
        }

        public void BanPlayer()
        {
            _isbanned = true;
            Console.WriteLine("Игрок забанен.");
            Console.ReadKey();
            Console.Clear();
        }

        public void UnBanPlayer()
        {
            _isbanned = false;
            Console.WriteLine("Игрок разбанен.");
            Console.ReadKey();
            Console.Clear();
        }
        public int GetID()
        {
            return _id;
        }
    }
}
